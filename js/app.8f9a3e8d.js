(function(e){function t(t){for(var a,o,r=t[0],c=t[1],l=t[2],d=0,m=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/API_Bason/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"050a":function(e,t,n){},"09d3":function(e,t,n){"use strict";n("d85a")},"1fa7":function(e,t,n){},"2f44":function(e,t,n){"use strict";n("050a")},"4a60":function(e,t,n){"use strict";n("8032")},5416:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),i=Object(a["f"])("div",{id:"nav"},null,-1);function s(e,t){var n=Object(a["v"])("router-view");return Object(a["o"])(),Object(a["d"])(a["a"],null,[i,Object(a["f"])(n)],64)}n("09d3");const o={};o.render=s;var r=o,c=n("6c02"),l=(n("b0c0"),Object(a["C"])("data-v-6976cdf9"));Object(a["r"])("data-v-6976cdf9");var u={class:"home"},d={class:"timeline"},m={style:{display:"grid",width:"100vw","grid-template-columns":"11rem auto auto","align-items":"start"}},p=Object(a["f"])("div",{style:{height:"24px",width:"10rem","border-radius":"20px",margin:"1rem 0 1rem 1rem",border:"2px solid #006B5A"}},[Object(a["f"])("p",{style:{margin:"0 0 0 5px",color:"ghostwhite"}},"Channel")],-1),f={class:"divProgress"},b={class:"progress",id:"progress"},h={class:"samples"};Object(a["p"])();var v=l((function(e,t,n,i,s,o){var r=Object(a["v"])("DrumMachine"),c=Object(a["v"])("Sample");return Object(a["o"])(),Object(a["d"])("div",u,[Object(a["f"])(r),Object(a["f"])("div",d,[Object(a["f"])("div",m,[p,Object(a["f"])("div",f,[Object(a["f"])("div",b,[(Object(a["o"])(),Object(a["d"])(a["a"],null,Object(a["u"])(4,(function(e){return Object(a["f"])("p",{key:e,class:"numberOfMesure",style:{marginLeft:17.5*(e-1)+.25+"vw"}},Object(a["x"])(e),5)})),64))])])]),Object(a["f"])("div",h,[(Object(a["o"])(!0),Object(a["d"])(a["a"],null,Object(a["u"])(o.samplesChosen,(function(e){return Object(a["o"])(),Object(a["d"])(c,{key:e.id,id:e.id,name:e.name,src:e.src,selected:e.selected},null,8,["id","name","src","selected"])})),128))]),Object(a["f"])("button",{type:"button",class:"btn ms-3",style:{"background-color":"#888888"},onClick:t[1]||(t[1]=function(){return o.addSample&&o.addSample.apply(o,arguments)})},"ADD SAMPLE")])])})),g=n("1da1"),O=(n("d3b7"),n("96cf"),Object(a["C"])("data-v-efc49eae"));Object(a["r"])("data-v-efc49eae");var y={class:"drumMachine mx-5"},j=Object(a["f"])("h1",{style:{color:"ghostwhite"}},"Boite Ã  Sons",-1),w={class:"float-start me-2"},x=Object(a["f"])("div",{class:"float-start",style:{"margin-top":"2px"}},[Object(a["f"])("p",{style:{margin:"3px 8px 0 auto"}},"PLAY")],-1),C=Object(a["f"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-play-fill",viewBox:"0 0 16 16",style:{"margin-top":"2px"}},[Object(a["f"])("path",{d:"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"})],-1),S=Object(a["f"])("div",{class:"float-start",style:{"margin-top":"2px"}},[Object(a["f"])("p",{style:{margin:"3px 8px 0 auto"}},"STOP")],-1),B=Object(a["f"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-stop-fill",viewBox:"0 0 16 16",style:{"margin-top":"2px"}},[Object(a["f"])("path",{d:"M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z"})],-1),A={class:"divInputBpm"},k=Object(a["f"])("label",{class:"labelInputBpm",color:"gray","font-size":"0.6rem","font-weight":"600","letter-spacing":"0.1em",for:"bpm"},"BPM",-1),I={class:"divInputButtons",display:"flex"},T=Object(a["f"])("svg",{width:"10px",height:"6px",viewBox:"0 0 12 7",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},[Object(a["f"])("polygon",{points:"0 7 12 7 6 0",fill:"white"})],-1),P=Object(a["f"])("svg",{width:"10px",height:"6px",viewBox:"0 0 12 7",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},[Object(a["f"])("polygon",{points:"0 0 12 0 6 7",fill:"white"})],-1);Object(a["p"])();var N=O((function(e,t,n,i,s,o){return Object(a["o"])(),Object(a["d"])("div",y,[j,Object(a["f"])("div",null,[Object(a["f"])("div",w,[Object(a["f"])("button",{class:"btn btn-success buttonPlay",id:"btnPlay",type:"button",onClick:t[1]||(t[1]=function(){return o.changeButtonAction&&o.changeButtonAction.apply(o,arguments)})},[x,C]),Object(a["f"])("button",{class:"btn btn-danger buttonPlay d-none",id:"btnPause",type:"button",onClick:t[2]||(t[2]=function(){return o.changeButtonAction&&o.changeButtonAction.apply(o,arguments)})},[S,B])]),Object(a["f"])("div",A,[k,Object(a["B"])(Object(a["f"])("input",{class:"bpm-text-input inputBpm",min:"30",max:"300","font-size":"1.5rem","font-weight":"500",id:"bpm",color:"brightRed",type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.bpm=e}),onBlur:t[4]||(t[4]=function(){return o.updateInput&&o.updateInput.apply(o,arguments)})},null,544),[[a["z"],o.bpm,void 0,{number:!0}]]),Object(a["f"])("div",I,[Object(a["f"])("button",{class:"inputButton",id:"inputButtonUp",color:"white",width:"2rem","aria-label":"Increase beat per minute","font-weight":"bold",onClick:t[5]||(t[5]=function(){return o.upBpm&&o.upBpm.apply(o,arguments)})},[T]),Object(a["f"])("button",{class:"inputButton",id:"inputButtonDown",color:"white",width:"2rem","aria-label":"Decrease beat per minute","font-weight":"bold",onClick:t[6]||(t[6]=function(){return o.downBpm&&o.downBpm.apply(o,arguments)})},[P])])])])])})),$={name:"DrumMachine",computed:{bpm:{get:function(){return this.$store.state.bpm},set:function(e){if(e>300)return e=300,this.$store.commit("setBpm",e),void this.$forceUpdate();e<30&&(e=30),this.$store.commit("setBpm",e)}}},methods:{updateInput:function(e){e.target.value<30&&(e.target.value=30)},changeButtonAction:function(){var e=this;if(this.$store.dispatch("play"),document.getElementById("btnPlay").classList.contains("d-none")){var t=document.getElementById("btnPause");t.classList.add("d-none"),t.disabled=!0;var n=document.getElementById("btnPlay");n.classList.remove("d-none"),n.disabled=!1,document.getElementById("progress").style.width="0%"}else{n=document.getElementById("btnPlay");n.classList.add("d-none"),n.disabled=!0;t=document.getElementById("btnPause");t.classList.remove("d-none"),t.disabled=!1,requestAnimationFrame((function(){e.loopSeeTime()}))}},upBpm:function(){var e=parseInt(document.getElementById("bpm").value,10);e=isNaN(e)?0:e,e++,e>300||(document.getElementById("bpm").value=e,document.getElementById("inputButtonUp").blur(),this.$store.commit("setBpm",e))},downBpm:function(){var e=parseInt(document.getElementById("bpm").value,10);e=isNaN(e)?0:e,e--,e<30||(document.getElementById("bpm").value=e,document.getElementById("inputButtonDown").blur(),this.$store.commit("setBpm",e))},loopSeeTime:function(){var e=this;if(this.$store.state.isPlaying){var t=document.getElementById("progress"),n=this.$store.getters.getCurrentBeat;t.style.width=(n-1)/4*100+"%"}window.requestAnimationFrame((function(){e.loopSeeTime()}))}},mounted:function(){var e=this;window.addEventListener("keyup",(function(t){"Space"===t.code&&e.changeButtonAction()}))}};n("66ff");$.render=N,$.__scopeId="data-v-efc49eae";var E=$,V=Object(a["C"])("data-v-ed2d918e");Object(a["r"])("data-v-ed2d918e");var M={class:"centerDiv",style:{color:"white",height:"4rem",margin:"1rem 1rem"}},_={style:{margin:"1.25rem 15px 1.25rem 10px",display:"inline-block"}},L={ref:"audioPlayer"},D=Object(a["f"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-volume-up-fill",viewBox:"0 0 16 16"},[Object(a["f"])("path",{d:"M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"}),Object(a["f"])("path",{d:"M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"}),Object(a["f"])("path",{d:"M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707zM6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z"})],-1),z=Object(a["f"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-volume-mute-fill",viewBox:"0 0 16 16"},[Object(a["f"])("path",{d:"M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zm7.137 2.096a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z"})],-1),F={class:"d-lg-inline-block d-none",style:{display:"inline-block","vertical-align":"top","margin-left":"1em",height:"4rem"}},R=Object(a["f"])("label",{syle:"display: block;",for:"temps"},"Nombre de temps :",-1),U=Object(a["f"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[Object(a["f"])("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),Object(a["f"])("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})],-1);Object(a["p"])();var G=V((function(e,t,n,i,s,o){var r=Object(a["v"])("SampleControl");return Object(a["o"])(),Object(a["d"])(a["a"],null,[Object(a["f"])(r,{name:o.mySample.name,id:o.mySample.id,src:o.mySample.src,selected:o.mySample.selected,class:[{hidden:0==o.mySample.selected},"sampleControl"]},null,8,["name","id","src","selected","class"]),Object(a["f"])("div",M,[Object(a["f"])("div",{class:{selectedSample:1==o.mySample.selected},id:o.mySample.id,style:{display:"inline-block",height:"4rem","vertical-align":"top",background:"#888888",width:"10rem","border-radius":"5px","margin-right":"0.5rem"},onClick:t[3]||(t[3]=function(){return o.selectChannel&&o.selectChannel.apply(o,arguments)})},[Object(a["f"])("p",_,Object(a["x"])(o.mySample.name.substring(0,7)),1),Object(a["f"])("audio",L,[Object(a["f"])("source",{ref:"audioSource",src:o.mySample.src},null,8,["src"])],512),!1===o.mySample.mute?(Object(a["o"])(),Object(a["d"])("button",{key:0,type:"button",class:"btn",style:{"z-index":"2",display:"inline-block",float:"right",margin:"0.75rem auto"},onClick:t[1]||(t[1]=function(){return o.mute&&o.mute.apply(o,arguments)})},[D])):Object(a["e"])("",!0),!0===o.mySample.mute?(Object(a["o"])(),Object(a["d"])("button",{key:1,type:"button",class:"btn",style:{"z-index":"2, display: inline-block",float:"right",margin:"0.75rem auto"},onClick:t[2]||(t[2]=function(){return o.mute&&o.mute.apply(o,arguments)})},[z])):Object(a["e"])("",!0)],10,["id"]),(Object(a["o"])(!0),Object(a["d"])(a["a"],null,Object(a["u"])(s.nbMesures,(function(e){return Object(a["o"])(),Object(a["d"])("div",{key:e,style:{display:"inline-block",height:"4rem","margin-right":"0.5vw"},class:{start_mesure:1==e,border_right_mesures:4!=e}},[(Object(a["o"])(!0),Object(a["d"])(a["a"],null,Object(a["u"])(s.nbTemps,(function(t){return Object(a["o"])(),Object(a["d"])("div",{key:t+s.nbTemps*(e-1),ref:"temps-ref-"+(t+s.nbTemps*(e-1)),name:o.mySample.name,style:[{"background-color":"#888888",height:"4rem",display:"inline-block","border-radius":"5px"},{width:15/s.nbTemps+(4-s.nbTemps)/(2*s.nbTemps)+"vw","margin-right":"0.5vw"}],onClick:function(n){return o.active(t+s.nbTemps*(e-1))}},null,12,["name","onClick"])})),128))],2)})),128)),Object(a["f"])("div",F,[R,Object(a["B"])(Object(a["f"])("input",{style:{display:"block",width:"8rem"},type:"number",id:"temps",name:"temps",min:"1",max:"8","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.temps=e})},null,512),[[a["z"],o.temps,void 0,{number:!0}]])]),1!==e.$store.state.samplesChosen.length?(Object(a["o"])(),Object(a["d"])("button",{key:0,type:"button",class:"btn btn-danger",style:{"vertical-align":"top",margin:"1em auto 1em 2em"},onClick:t[5]||(t[5]=function(){return o.deleteSample&&o.deleteSample.apply(o,arguments)})},[U])):Object(a["e"])("",!0)])],64)})),H=(n("7db0"),Object(a["C"])("data-v-178b57c3"));Object(a["r"])("data-v-178b57c3");var q={class:"reset-this redo-fieldset"},J=Object(a["f"])("legend",{class:"reset-this redo-legend"},"SAMPLE CONTROL",-1),K={class:"row"},Y={class:"col-3"},Q={class:"col-6"};Object(a["p"])();var W=H((function(e,t,n,i,s,o){var r=Object(a["v"])("SampleChooser"),c=Object(a["v"])("SampleFxTab");return Object(a["o"])(),Object(a["d"])("fieldset",q,[J,Object(a["f"])("div",K,[Object(a["f"])("div",Y,[Object(a["f"])(r,{name:o.mySample.name,id:o.mySample.id,src:o.mySample.src,selected:o.mySample.selected},null,8,["name","id","src","selected"])]),Object(a["f"])("div",Q,[Object(a["f"])(c,{name:o.mySample.name,id:o.mySample.id,src:o.mySample.src,selected:o.mySample.selected},null,8,["name","id","src","selected"])])])])})),X=Object(a["C"])("data-v-34417bfc");Object(a["r"])("data-v-34417bfc");var Z={class:"row"},ee={class:"col-2"},te=Object(a["f"])("label",{for:"sample",class:"btn btn-outline-secondary"},"Add Sample",-1),ne={class:"col ms-2"};Object(a["p"])();var ae=X((function(e,t,n,i,s,o){var r=Object(a["v"])("CustomSelect");return Object(a["o"])(),Object(a["d"])("div",Z,[Object(a["f"])("div",ee,[te,Object(a["f"])("input",{type:"file",accept:"audio/*",id:"sample",onChange:t[1]||(t[1]=function(){return o.addSampleOption&&o.addSampleOption.apply(o,arguments)})},null,32)]),Object(a["f"])("div",ne,[Object(a["f"])(r,{options:o.allSamples,default:o.mySample.name,onInput:t[2]||(t[2]=function(e){return o.selectSample(e)}),class:"select"},null,8,["options","default"])])])})),ie=(n("159b"),Object(a["C"])("data-v-7d65360c")),se=ie((function(e,t,n,i,s,o){return Object(a["o"])(),Object(a["d"])("div",{class:"custom-select",tabindex:n.tabindex,onBlur:t[2]||(t[2]=function(e){return s.open=!1})},[Object(a["f"])("div",{class:["selected",{open:s.open}],onClick:t[1]||(t[1]=function(e){return s.open=!s.open})},Object(a["x"])(s.selected.substring(0,20)),3),Object(a["f"])("div",{class:["items",{selectHide:!s.open}]},[(Object(a["o"])(!0),Object(a["d"])(a["a"],null,Object(a["u"])(n.options,(function(t,n){return Object(a["o"])(),Object(a["d"])("div",{key:n,onClick:function(n){s.selected=t,s.open=!1,e.$emit("input",t)}},Object(a["x"])(t.substring(0,20)),9,["onClick"])})),128))],2)],40,["tabindex"])})),oe=(n("a9e3"),{props:{options:{type:Array,required:!0},default:{type:String,required:!1,default:null},tabindex:{type:Number,required:!1,default:0}},data:function(){return{selected:this.default?this.default:this.options.length>0?this.options[0]:null,open:!1}}});n("2f44");oe.render=se,oe.__scopeId="data-v-7d65360c";var re=oe,ce={components:{CustomSelect:re},props:["name","id","src","selected"],computed:{allSamples:function(){var e=this.$store.state.samples,t=[];return e.forEach((function(e){t.push(e.name)})),t},selectedSampleName:function(){var e=this.$store.getters.getSelectedSample;return e.name},getAudioCtx:function(){return this.$store.getters.getAudioCtx},mySample:function(){var e=this,t=this.$store.state.samplesChosen.find((function(t){return t.id===e.id}));return t}},methods:{readUploadedFile:function(e){var t=new FileReader;return new Promise((function(n,a){t.onerror=function(){t.abort(),a(new DOMException("Problem parsing input file."))},t.onload=function(){n(t.result)},t.readAsArrayBuffer(e)}))},createAudioBuffer:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.getAudioCtx,n.next=3,a.decodeAudioData(e);case 3:return i=n.sent,n.abrupt("return",i);case 5:case"end":return n.stop()}}),n)})))()},addSampleOption:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=document.getElementById("sample").files[0],t.next=3,e.readUploadedFile(n);case 3:return a=t.sent,t.next=6,e.createAudioBuffer(a);case 6:i=t.sent,e.$store.commit("addSamples",{sampleName:n.name,buffer:i});case 8:case"end":return t.stop()}}),t)})))()},selectSample:function(e){this.$store.commit("selectSample",e),this.$store.commit("initAudio",this.mySample.id)}}};n("876f");ce.render=ae,ce.__scopeId="data-v-34417bfc";var le=ce,ue=Object(a["C"])("data-v-63a7c3e3");Object(a["r"])("data-v-63a7c3e3");var de={class:"row"},me={class:"col-3"},pe={class:"col-3"},fe=Object(a["f"])("datalist",{id:"magnet"},[Object(a["f"])("option",{value:"0"})],-1);Object(a["p"])();var be=ue((function(e,t,n,i,s,o){return Object(a["o"])(),Object(a["d"])("div",de,[Object(a["f"])("div",me,[Object(a["f"])("input",{type:"range",min:"0",max:"100",step:"1",value:"100",id:"volume"+o.mySample.id,onInput:t[1]||(t[1]=function(){return o.updateGain&&o.updateGain.apply(o,arguments)})},null,40,["id"]),Object(a["f"])("p",null,"Gain : "+Object(a["x"])(o.mySample.fxParams.gainValue),1)]),Object(a["f"])("div",pe,[Object(a["f"])("input",{type:"range",min:"-100",max:"100",step:"1",value:"0",list:"magnet",id:"pan"+o.mySample.id,onInput:t[2]||(t[2]=function(){return o.updatePan&&o.updatePan.apply(o,arguments)})},null,40,["id"]),fe])])})),he={props:["id","name","src","selected"],computed:{mySample:function(){var e=this,t=this.$store.state.samplesChosen.find((function(t){return t.id===e.id}));return t},getAudioCtx:function(){return this.$store.getters.getAudioCtx}},methods:{updateGain:function(){var e="volume"+this.mySample.id,t=document.getElementById(e).value/100;this.$store.commit("updateGain",{value:t,sampleId:this.mySample.id})},updatePan:function(){var e="pan"+this.mySample.id,t=document.getElementById(e).value/100;this.$store.commit("updatePan",{value:t,sampleId:this.mySample.id}),this.mySample.audioNode.pan.pan.setValueAtTime(t,this.getAudioCtx.currentTime)}}};he.render=be,he.__scopeId="data-v-63a7c3e3";var ve=he,ge={components:{SampleChooser:le,SampleFxTab:ve},props:["name","id","src","selected"],computed:{mySample:function(){var e=this,t=this.$store.state.samplesChosen.find((function(t){return t.id===e.id}));return t}}};n("fb9a");ge.render=W,ge.__scopeId="data-v-178b57c3";var Oe=ge,ye={data:function(){return{nbTemps:4,nbMesures:4}},components:{SampleControl:Oe},methods:{active:function(e){var t="temps-ref-"+e,n=this.$refs[t];this.$store.commit("setNote",{sampleId:this.mySample.id,noteId:e-1}),n.classList.contains("active")?n.classList.remove("active"):(n.classList.add("active"),this.$store.commit("initAudio",this.mySample.id),this.$store.state.isPlaying||this.$store.commit("playNote",this.mySample.id))},deleteSample:function(){this.$store.commit("deleteSamplesChosen",this.id)},selectChannel:function(){this.$store.commit("selectChannel",this.mySample.id)},mute:function(e){e.stopPropagation(),e.shiftKey?(console.log("SHIFT"),this.$store.commit("activeOnlyThisSong",this.id)):this.$store.commit("mute",this.id)}},props:["id","name","src","selected"],computed:{getAudioCtx:function(){return this.$store.getters.getAudioCtx},mySample:function(){var e=this,t=this.$store.state.samplesChosen.find((function(t){return t.id===e.id}));return t},temps:{get:function(){return this.nbTemps},set:function(e){if(5===e)e=6===this.nbTemps?4:6;else if(7===e)e=8===this.nbTemps?6:8;else if(""===e)return;for(var t=document.getElementsByName(this.name),n=0;n<t.length;n++)t[n].classList.remove("active");this.nbTemps=e}}}};n("4a60");ye.render=G,ye.__scopeId="data-v-ed2d918e";var je=ye,we={name:"Sequencer",components:{DrumMachine:E,Sample:je},computed:{samplesChosen:function(){return this.$store.state.samplesChosen},getAudioCtx:function(){return this.$store.getters.getAudioCtx}},methods:{addSample:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=n("db8c"),t.next=3,e.fetchFile(a);case 3:return i=t.sent,t.next=6,e.readUploadedFile(i);case 6:return s=t.sent,t.next=9,e.createAudioBuffer(s);case 9:o=t.sent,e.$store.commit("addSamplesChosen",{sampleName:"Default",src:o,selected:!0});case 11:case"end":return t.stop()}}),t)})))()},playTick:function(){this.counter+=1,this.futureTickTime+=this.counterTimeValue,this.counter>15&&(this.counter=0)},fetchFile:function(e){return new Promise((function(t,n){fetch(e).then((function(e){e.ok&&t(e.blob()),n(new Error("Network response was not ok."))}))}))},readUploadedFile:function(e){var t=new FileReader;return new Promise((function(n,a){t.onerror=function(){t.abort(),a(new DOMException("Problem parsing input file."))},t.onload=function(){n(t.result)},t.readAsArrayBuffer(e)}))},createAudioBuffer:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.getAudioCtx,n.next=3,a.decodeAudioData(e);case 3:return i=n.sent,n.abrupt("return",i);case 5:case"end":return n.stop()}}),n)})))()}},mounted:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("createAudioCtx"),a=n("db8c"),t.next=4,e.fetchFile(a);case 4:return i=t.sent,t.next=7,e.readUploadedFile(i);case 7:return s=t.sent,t.next=10,e.createAudioBuffer(s);case 10:o=t.sent,e.$store.commit("addDefaultSample",o);case 12:case"end":return t.stop()}}),t)})))()}};n("a4a9");we.render=v,we.__scopeId="data-v-6976cdf9";var xe=we,Ce=[{path:"/",name:"Sequencer",component:xe}],Se=Object(c["a"])({history:Object(c["b"])("/API_Bason/"),routes:Ce}),Be=Se,Ae=(n("cb29"),n("1276"),n("ac1f"),n("a434"),n("5502")),ke=Object(Ae["a"])({devtools:!0,state:{audioCtx:null,samples:[],samplesChosen:[],isPlaying:!1,bpm:80,lookAhead:25,scheduleAheadTime:.1,currentNote:0,nextNoteTime:0,schedule:[],timerID:null,startTime:0},getters:{getAudioCtx:function(e){return"suspended"===e.audioCtx.state&&e.audioCtx.resume(),e.audioCtx},getCurrentBeat:function(e){var t=(e.audioCtx.currentTime-e.startTime)*(e.bpm/60);return t%4+1}},mutations:{createAudioCtx:function(e){var t=new(window.AudioContext||window.webkitAudioContext);"suspended"===t.state&&t.resume(),e.audioCtx=t},addDefaultSample:function(e,t){e.samples.push({id:1,name:"Default",src:t}),e.samplesChosen.push({id:1,name:"Default",src:t,selected:!0,audioNode:null,mute:!1,fxParams:{gainValue:1,panValue:0},track:Array(16).fill(!1)})},addSamples:function(e,t){var n=t.sampleName,a=t.buffer,i=e.samples.length+1,s=n.split(".")[0],o={name:s,id:i,src:a};e.samples.push(o)},setBpm:function(e,t){e.bpm=t},addSamplesChosen:function(e,t){var n=t.sampleName,a=t.src,i=t.selected;if(0==e.samplesChosen.length)var s=1;else s=e.samplesChosen[e.samplesChosen.length-1]["id"]+1;var o={id:s,name:n,src:a,selected:i,audioNode:null,mute:!1,fxParams:{gainValue:1,panValue:0},track:Array(16).fill(!1)};e.samplesChosen.forEach((function(e){e.selected=!1})),e.samplesChosen.push(o)},deleteSamplesChosen:function(e,t){var n=e.samplesChosen.find((function(e){return e.id===t}));n.selected?(e.samplesChosen.splice(e.samplesChosen.indexOf(n),1),e.samplesChosen[0]["selected"]=!0):e.samplesChosen.splice(e.samplesChosen.indexOf(n),1)},selectSample:function(e,t){for(var n=e.samples.find((function(e){return e.name===t})),a=0;a<e.samplesChosen.length;a++){var i=e.samplesChosen[a];i.selected&&(i.name=n.name,i.src=n.src)}},selectChannel:function(e,t){var n=e.samplesChosen.find((function(e){return e.id===t}));e.samplesChosen.forEach((function(e){e!=n&&(e.selected=!1)})),n.selected=!0},initAudio:function(e,t){var n=e.samplesChosen.find((function(e){return e.id===t}));if(null===n.audioNode){var a=e.audioCtx.createGain(),i=e.audioCtx.createStereoPanner();a.connect(i),i.connect(e.audioCtx.destination),n.audioNode={gain:a,pan:i}}n.audioNode.gain.gain.setValueAtTime(n.fxParams.gainValue,e.audioCtx.currentTime),n.audioNode.pan.pan.setValueAtTime(n.fxParams.panValue,e.audioCtx.currentTime)},activeOnlyThisSong:function(e,t){for(var n=0;n<e.samplesChosen.length;n++)e.samplesChosen[n]["id"]!==t?(e.samplesChosen[n]["mute"]=!0,this.commit("updateGain",{value:document.getElementById("volume"+e.samplesChosen[n]["id"]).value/100,sampleId:e.samplesChosen[n]["id"]})):(e.samplesChosen[n]["mute"]=!1,this.commit("updateGain",{value:document.getElementById("volume"+e.samplesChosen[n]["id"]).value/100,sampleId:e.samplesChosen[n]["id"]}))},mute:function(e,t){var n=e.samplesChosen.find((function(e){return e.id===t}));n.mute=!n.mute,console.log("MUTE",n.mute),this.commit("updateGain",{value:document.getElementById("volume"+n.id).value/100,sampleId:t})},updateGain:function(e,t){var n=t.value,a=t.sampleId,i=e.samplesChosen.find((function(e){return e.id===a}));i.mute?(i.fxParams.gainValue=0,this.commit("initAudio",a)):(i.fxParams.gainValue=n,this.commit("initAudio",a))},updatePan:function(e,t){var n=t.value,a=t.sampleId,i=e.samplesChosen.find((function(e){return e.id===a}));i.fxParams.panValue=n},playNote:function(e,t){var n=e.samplesChosen.find((function(e){return e.id===t}));n.audioNode.source=e.audioCtx.createBufferSource(),n.audioNode.source.buffer=n.src,n.audioNode.source.connect(n.audioNode.gain),n.audioNode.source.start()},setNote:function(e,t){var n=t.sampleId,a=t.noteId,i=e.samplesChosen.find((function(e){return e.id===n}));i.track[a]=!i.track[a]},nextNote:function(e){var t=60/(4*e.bpm);e.nextNoteTime+=t,e.currentNote++,16===e.currentNote&&(e.currentNote=0)}},actions:{scheduleNote:function(e,t){var n=e.commit,a=e.state,i=t.beatNumber,s=t.time;a.schedule.push({note:i,time:s}),a.samplesChosen.forEach((function(e){e.track[i]&&n("playNote",e.id)}))},scheduler:function(e){var t=e.state,n=e.commit,a=e.dispatch;while(t.nextNoteTime<t.audioCtx.currentTime+t.scheduleAheadTime)a("scheduleNote",{beatNumber:t.currentNote,time:t.nextNoteTime}),n("nextNote");t.timerID=window.setTimeout((function(){a("scheduler")}),t.lookAhead)},play:function(e){var t=e.state,n=e.dispatch;t.isPlaying=!t.isPlaying,t.isPlaying?("suspended"===t.audioCtx.state&&t.audioCtx.resume(),t.currentNote=0,t.nextNoteTime=t.audioCtx.currentTime,t.startTime=t.audioCtx.currentTime,n("scheduler")):(window.clearTimeout(t.timerID),t.startTime=0)}},modules:{}});n("ab8b"),n("7b17");Object(a["c"])(r).use(ke).use(Be).mount("#app")},"66ff":function(e,t,n){"use strict";n("aeeb")},"7b05":function(e,t,n){},8032:function(e,t,n){},"876f":function(e,t,n){"use strict";n("7b05")},a4a9:function(e,t,n){"use strict";n("1fa7")},aeeb:function(e,t,n){},d85a:function(e,t,n){},db8c:function(e,t,n){e.exports=n.p+"media/kick.fa5ee8d5.wav"},fb9a:function(e,t,n){"use strict";n("5416")}});
//# sourceMappingURL=app.8f9a3e8d.js.map